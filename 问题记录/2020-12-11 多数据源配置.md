# dynamic多数据配置



```yml
spring:
  application:
    name: timed-task-filter-data-biz
  datasource:
    druid:
      initial-size: 10
      max-active: 100
      min-idle: 3
      max-wait: 5000
      pool-prepared-statements: true
      max-pool-prepared-statement-per-connection-size: 100
    dynamic:
      primary: master
      datasource:
        # 多数据源配置
        #postgresql://10.51.7.21:5432/lgdb
        master:
          #postgresql://10.51.7.21:5432中心db ip
          #postgresql://192.168.7.98:5432/dwdb #公司db
          url: jdbc:postgresql://192.168.7.98:5432/dwdb
          username: java
          password: java
          driver-class-name: org.postgresql.Driver
```

```xml
<!-- 动态数据源 -->
<dependency>
    <groupId>com.baomidou</groupId>
    <artifactId>dynamic-datasource-spring-boot-starter</artifactId>
    <version>${dynamic.version}</version>
</dependency>
```

```java
@SpringBootApplication(exclude = DruidDataSourceAutoConfigure.class)//多数据源时，初始化mybatis没有加载数据库链接池
//@EnableDiscoveryClient
@MapperScans({@MapperScan("org.timd.task.mapper")})
public class TimeTaskDataFilterActionMain {
    public static void main(String[] args) throws UnknownHostException {
        ConfigurableApplicationContext application = SpringApplication.run(TimeTaskDataFilterActionMain.class, args);
        Environment env = application.getEnvironment();
        String ip = InetAddress.getLocalHost().getHostAddress();
        String port = env.getProperty("server.port");
        log.info("\n----------------------------------------------------------\n\t" +
                         "TimeTaskDataFilterActionMain is running! Access URLs:\n\t" +
                         "Local: \t\thttp://localhost:" + port  + "/\n\t" +
                         "External: \thttp://" + ip + ":" + port  + "/\n\t" +
                         "----------------------------------------------------------");

    }
}
```