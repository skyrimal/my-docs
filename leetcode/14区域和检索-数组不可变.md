# [区域和检索 - 数组不可变](https://leetcode-cn.com/problems/range-sum-query-immutable/)

给定一个整数数组  `nums`，求出数组从索引 `i` 到 `j`*（*`i ≤ j`）范围内元素的总和，包含 `i`、`j `两点。

实现 `NumArray` 类：

- `NumArray(int[] nums)` 使用数组 `nums` 初始化对象
- `int sumRange(int i, int j)` 返回数组 `nums` 从索引 `i` 到 `j`*（*`i ≤ j`）范围内元素的总和，包含 `i`、`j `两点（也就是 `sum(nums[i], nums[i + 1], ... , nums[j])`）

将每一个位置的和进行预算，可以避免多次调用时每次都重复遍历数组

```java
private int[] preSum;

    public NumArray(int[] nums) {
        preSum = new int[nums.length];//相减时可能为负，所以扩容1
        for (int i = 0; i < nums.length; i++) {
            preSum[i] = preSum[i] + nums[i];
        }
    }

    public int sumRange(int i, int j) {
        if(i==0) return preSum[j];
        return preSum[j] - preSum[i-1];//j减去i前面一个就是i-j的总和
    }
/*
    方法1，  缺点在于每次调用sumRange都会遍历数组
    int[] nums;

    public NumArray(int[] nums) {
        this.nums = nums;
    }

    public int sumRange(int i, int j) {
        int sum = 0;
        for (int k = i; k < j + 1; k++) {
            sum += nums[k];
        }
        return sum;
    }*/
/*    private int[] preSum;

    public NumArray(int[] nums) {
        preSum = new int[nums.length + 1];//相减时可能为负，所以扩容1
        for (int i = 0; i < nums.length; i++) {
            preSum[i + 1] = preSum[i] + nums[i];
        }
    }

    public int sumRange(int i, int j) {
        return preSum[j + 1] - preSum[i];
    }*/

```