#### [二维区域和检索 - 矩阵不可变](https://leetcode-cn.com/problems/range-sum-query-2d-immutable/)

给定一个二维矩阵，计算其子矩形范围内元素的总和，该子矩阵的左上角为 `(row1, col1)` ，右下角为 `(row2, col2)` 。

![Range Sum Query 2D](https://assets.leetcode-cn.com/aliyun-lc-upload/images/304.png)

上图子矩阵左上角 (row1, col1) = **(2, 1)** ，右下角(row2, col2) = **(4, 3)，**该子矩形内元素的总和为 8。

逻辑和普通数组相似，先计算出每个坐标对应的二维数组的面积，之后通过简单的几何原理就可以通过加减快速的车任意区间的面积

![image.png](https://pic.leetcode-cn.com/1614625214-KGhKoh-image.png)

```java

    private int[][] matrixHex;

    public NumMatrix(int[][] matrix) {
        if(matrix.length==0){
            matrixHex = new int[0][0];
            return;
        }
        int row = matrix.length;
        int col = matrix[0].length;
        matrixHex = new int[row][col];
        matrixHex[0][0]=matrix[0][0];
        //初始化时求出二维前缀值
        //遍历第一列第一行
        for (int i = 1; i < row; i++) {
            matrixHex[i][0]=matrixHex[i-1][0]+matrix[i][0];
        }
        for (int i = 1; i < col; i++) {
            matrixHex[0][i]=matrixHex[0][i-1]+matrix[0][i];
        }
        
        for (int i = 1; i < row; i++) {
            for (int j = 1; j < col; j++) {//一二层遍历每一个点
                matrixHex[i][j]=matrixHex[i-1][j]+matrixHex[i][j-1]+matrix[i][j]-matrixHex[i-1][j-1];
            }
        }
    }

    public int sumRegion(int row1, int col1, int row2, int col2) {
        int sum = matrixHex[row2][col2];
        if(row1!=0){
            sum-=matrixHex[row1 - 1][col2];
        }
        if(col1!=0){
            sum-=matrixHex[row2][col1 - 1];
        }
        if(row1!=0&&col1!=0){
            sum+=matrixHex[row1-1][col1-1];
        }
        return sum;
    }
```

